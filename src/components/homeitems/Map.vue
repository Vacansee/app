<template>
  <div id="mapBox">
    <svg id="map" viewBox="0 4 1024 1706">
      <g id="bg">
        <path d="M0 0h1024v1706H0z" style="fill:transparent" />
        <g id="stair">
          <path d="M848 904h7M11 790l-44 1" />
          <path d="M59 789H49l-1-6H11" />
          <path
            d="m315 733 15-1m8-30v-2m0-2v-2m437 132-31-17M171 926h-2m332-226h-4m4 8v-4m55 36h10m56-10v-8m-7 20h-8m85-33 4-2m-188 66v5m9 14h-6" />
          <path d="M48 783v-6h11m16-54 15-1 2 5h16" />
          <path
            d="M161 925h-3m-2 0h-3m-3-1h-3m-2 0h-2m113-3h-2m176-101h6m83-10v-3m56 38h7m-32-31v-3M230 933l-2 2m21-31h5m-82-103-18-4m675 2-4-1M113 997l-3-1m48-240 4 4m-11-10 4 4m-11-10 4 4m-10-9 5 4m-11-11 1 3m359-22-17 1m-252 39-5-11m-30 27-2-10m27-36v-4m-5-15-5 2m13-9v-5" />
          <path d="m227 659-4 17h-9m-82 333v-3l1-2 1-1 1-1 1-1 1-1 1-1" />
          <path d="M108 995h-3m62-69h-3m396 49v3m327-74h5M517 799v-3" />
          <path d="M342 808h7v-2h-6" />
          <path d="M630 720v2m-129-9 1 6m-211 8v-6m-125-83h-9m-3 27h5m-9-33-9-1m-10 147 1-4" />
          <path d="m95 642-8 1v7l-21 1m21-1v11h8" />
          <path d="m565 815 10-1m-6-7-4 8m65-93v2" />
        </g>
        <g id="walk">
          <path d="m744 811-2-1-3-1h-5l-6-1-33 2-20-1-23-1m-12 25 2-2 20 1v-14l-10-10M195 690l-1-1-2-1-8-1" />
          <path d="M200 687v-3l-1-2-1-1-1-1-4-1h-4l-1 2-3 6m6 7 4-4 2-1h1l1-1 1-1 2 1h4l4-1" />
          <path d="M216 692h-9m325 124v13" />
          <path
            d="m200 704-2 2-3 1h-3l-4-1-5-2-1 5-2 3-1 2-5 6-2 2-1 3-1 3-4 25v3l1 3v1m206 205 25 1 4-1 9-1h5l52 2 73 4-1 15 20 1 22 1h8m-353-83h12m622-142 4 7-1 16" />
          <path d="m225 645 2 14" />
          <path
            d="m559 693-20 11-14 13m-392 64h-2v-3m481 45 7 1 6-9 3-5v-30l-3-4v-22m-114 39h-38M161 671l1-6 3-4 12-9m647 261 6 7 10 10 2 3 9 5 38 2 11-7m44-140c-9 0-16 0-24 2l-7 4-2 10-3 6-4 4-6 2-8 1h-17l-20-1h-6l-6-2-3-2-3-4-1-2-1-5v-7l-9-4h-14l-40 5-19 2-13-6m126 208v12h32l9 8h4l33 1" />
          <path d="M619 742h-4" />
          <path d="M108 727h12l4-1m764 252v-4l1-34" />
          <path d="M888 978h18m-70 0h15m-10 37 23 1" />
          <path
            d="m729 783-1-1-5-7-5-7-15-14-12-1v-11m134 151 6-2 6-5 3-4 1-11v-2l3-1 4-1h6l5 1v-5l12-12m-461 30 1 22-1 4-1 25 11 6 3 2 4 3 3 5 3 2 4 1 4 2 27 1v12" />
          <path d="m859 840 12 11 11 18h19l37-23" />
          <path d="m806 841 5 1 10 2 10 1 9 3 8 3h23l14-10" />
          <path d="M517 792v-19" />
          <path
            d="m575 845-1 32h-15v-7h-28m319 134v-2l1-24h37v27l-24-1-14-1M359 546l1 16v34l1 17v9l-1 26-1 9m208 41v-5h-8l-28-1-6 25" />
          <path d="m666 706 7 5" />
          <path d="m227 760 2 3 8 5 11 8 3 2 12 7 9 3m561 249v-15h8l1-21 8 1" />
          <path d="M305 733h10" />
          <path
            d="M495 713h6m50 61 1-17-6-3-7-1a43 43 0 0 0-15 3l-1 17-6 1-9-1-1-19-1-6-5-14 8-4m-99 202-3 7-5 20v6l-1 10 10 1m463-176-1 22-2 29 8 1 6 1 12 2 5 1 3-1 33-9 7-8-1-9m-737-82-1-3v-2l2-8 5-11" />
          <path d="m592 912 34 2" />
          <path d="m328 899-2 13-4 16 4 4 3 4 3 5 2 5 1 4 1 4 1 4v4l-1 8" />
          <path d="M627 896h-35" />
          <path d="m410 988 18 2h8l5-1h2l4 1 8 1" />
          <path d="m183 704 4-14" />
          <path
            d="m187 791 1-20v-2m-58-43 1 5 1 1m635 116v-9l1-3 2-3 2-4M308 729l-5 7 1 50m-115 63 33-2-1-25m138-115v-4l-1-38 1-8" />
          <path d="m619 742 2-12" />
          <path
            d="m772 829 3-1h5l10 2 3 2 3 2 4 3 6 4 3 4 29 20M673 711h13l6-2m-222 29 1-4 3-11-1-9m29 5 3 7 4 4 3 4 4 2 4 1 11 1 7 1 18 1m16 82 2 10 1 13m-35 140-1 17-52-2h-3l-2 1h-2l-2 1h-4l-1-1-1-1-2-2-1-2-2-2-2-1-2-1-3-1h-5l-5 74h-2l1 9v6" />
          <path d="m227 760 4 16" />
          <path
            d="M899 899v10l1 24m-384 80 22 1 1-12M229 790l7-6 12-8 13-9 11-8 14-10 6-3m288 76h-8l-22-3-14-1-6-3-1-6h-10m-265-81v13" />
          <path d="M495 713h-3" />
          <path
            d="M141 631h-22l-12-1h-7l-5 4v26l-1 9 3 4 33 1m92 173 1 6 3 12v27l1 23-4 8v11l1 5m116-166 3-8 4-15 6-15 5-10m76-19 1 8 1 37v11l-1 7m-34-73v5l-1 5v9" />
          <path d="m404 791-12-7-9-5-5-4-4-5-4-5-5-8-4-8-2-11-1-13v-9l1-9m68 96c1-11 3-20 6-28l2-6 4-6 19-45 1-3v-2" />
          <path
            d="M475 714h-2l-14-1h-7l-17 1-35 1-42 1h-17l-3 1-2 2-3 2-2 3v3l-1 5m23 59-5 8-1 2-5 3-4 2-3 2v19l-4 14-2 5-2 4-8 11-5 4-4 3-1 2m1-2-27-36-5-9 1-5" />
          <path d="M278 823a105 105 0 0 1 23 4 87 87 0 0 1 18 12l8 11 10 31m-144-45 9-6 6-3 6-3 5-1 2-1 7-1" />
          <path d="M329 846h25" />
          <path d="m278 823-24-3h-20l-6 1m412 12-12-1-9-8m33-16-17-3-6-1m-498 209 1-2v-2m-13-8 1-4 1-2v-1l1-3" />
          <path
            d="m178 1057-2-8v-2l-1-1-1-1-1-1-2-1-3-2-3-2-3-1-6-3h-1l-1-1-2-2-2-1v-1l-1-2-3-4-2-2-1-2-2-1-1-1-2-1-3-2-4-2-2-2-2-1-2-1-2-2v-1l-1-1-2-2v-2h-1l-3-2-1-1-2-2m738-58v40" />
          <path d="M75 723H64m160 68 5-1" />
          <path d="M539 692v12l-1 20v15l-2 14M214 970l2-12 1-6 62 6" />
          <path d="M501 704v-4" />
          <path d="m497 700-2-31v-8" />
          <path d="M501 713v-5" />
          <path d="M338 710v-5m0 0v-3" />
          <path d="M338 696v-2m0 6v-2" />
          <path d="M340 778v-5l-2-40v-23" />
          <path d="M330 732h8" />
          <path d="m304 786-22-19-10-8-16-16" />
          <path d="m696 707 2-1" />
          <path d="m651 704-5 8h-15v1l-1 7" />
          <path d="m625 754-19-1m19 1-6-12m-22-1h-7m0 0h-4m17 0h-7" />
          <path d="M607 742h-1l-3-1" />
          <path d="m625 776-19-23-1-1 1-10" />
          <path d="M622 722v-2m-48 20h-8" />
          <path d="M501 713h10l7 1 6 2 14 8 4 2 3 3 6 7 2 2 3 2" />
          <path d="M147 924h-2m8 1-3-1m8 1h-2m8 1-3-1m8 1h-2" />
          <path
            d="m245 904 3 15 1 4 4 8 3 5 3 5 3 3 3 3 5 3 5 2 2 1 3 1 4 1 7-1 6-1 6-3 4-2 5-4 2-3 2-2 3-5 3-6-4-3-4-3-6-3-5-2-5-2" />
          <path d="m298 915-9 1h-17l-4 1-4 2-8 2m74-36-1 11c0 1-2 2-1 3l41 62c1 2 4 2 4 4v7" />
          <path
            d="m328 899-7 5-4 3-5 3-9 3-5 2m-43-11h4l2 4 3 4 3 4 1 1m-40 18-3 4-3 4-4 6-1 3-21-2m32-129-3-7v-1l-1-22-6-1h-43l-3 3v8m65 79v24" />
          <path d="m330 885-5-4-16-11-8-2-7-1h-12l-4 1-4 1-6 1v1l-2 1-5 4-3 2-4 1h-9l-8 1m95-63-48 1" />
          <path d="m278 823-5 3-7 6-5 2-5 6-3 5-5 11-1 6-1 12-1 5" />
          <path d="M523 802v3" />
          <path d="M550 811v-13" />
          <path d="M550 819v-5" />
          <path d="M575 814v2l-3 6m-53-20h4l1-14" />
          <path d="m508 778 1 15m113-73h8m-8 0h-16" />
          <path d="M419 858v-22l1-2 6-5 1-2 1-7v-5l-1-12" />
          <path d="m427 803-24-12" />
          <path d="M519 807v-5l-2-2v-1m-171 82h-9l-7 4" />
          <path d="m259 904 15-1" />
          <path d="m254 921-5 2-5 2-6 3-5 3-3 2m49 29v1a6 6 0 0 0 5 3c3 0 6-3 6-6a6 6 0 0 0-8-5 6 6 0 0 0-3 7" />
          <path d="m287 965 6 1 43 4 37 2 28 2m-135 0v-2l1-1 1-2 1-1 2-1 8-5" />
          <path d="m143 924-12-1m50 5-10-2m1 21-9-1m64-186-2-5" />
          <path d="m224 791-6-4-30-16m36 20 2-6 5-9 6-8 16-23m-3 54v-9l1-12m185 42h2l-1-4" />
          <path d="M428 820h2" />
          <path d="m447 818-7 7-4 6-2 3-7-6m7 6 5 5 1 2v8l-1 3-2 7-3 4" />
          <path d="m216 700 45-2" />
          <path
            d="m203 706-1-1-2-1-9-10-4-4-2-3-4-4-20-12-1 4v22l-1 4-1 5-2 4-2 3-3 4-4 3-2 2-3 2-4 1-3 1h-11m89-7 1-15 2-4-8 4m-97 23-7 9-8 12a261 261 0 0 0-17 35h-6l-2 6h-8" />
          <path d="m186 759-1-2" />
          <path d="M272 788v20l1 5 6 5h5m-32-75v1l2 1c1 0 2-1 2-3l-1-1h-2l-1 1v1Z" />
          <path d="m255 745 6 22 4 14 7 7m-20-44-27 12-2-3m-75-5 2 1 1 1" />
          <path d="M143 743h1m11 11 3 2" />
          <path d="m162 760 1 1 1 1" />
          <path d="M110 995h-2" />
          <path d="M105 995h-2l-1-1 1-5m35 10h1l2-1 1-1v-5" />
          <path d="m226 893 11-1m0 0h11" />
          <path d="M214 676v4l-2 2-1 3-1 2-3 5-2 5-2 3-3 4" />
          <path d="M216 700v-3m617 102h-4m9 66 3 4m9-18-12 14" />
          <path
            d="M755 977h37l59-39m0 34 2-1h7l2-1 2-1h6l2 1 2 1h2l2-1 2 1h1l2 1 5 2m1-34 9 5 48 33h5v-2m-51-43 8-3 7-15m-65 89 20-12 18-11" />
          <path d="m851 978 19 14 18 13" />
          <path d="m134 735 4 4" />
          <path d="m225 814-40 1h-13v-14m668 129v-48m-429 21 5-2 15-5 8-2 11-1" />
          <path d="M410 907h-12" />
          <path d="m561 969-1 6v18l-7 12" />
          <path d="M581 1038h-20" />
          <path d="m640 833 1 8 1 9 7 3 71 1m164 15 1-16v-12l1-10m-27 32v-27m0 32h2l21 1" />
          <path d="M159 665h3m-30-1 22 1m-34 61v7" />
          <path
            d="M174 638h-8m274 203-9 11-4 6m-295-83 1-6 1-3 16-17 20-21m58 93 5 14 4 6 4 7 5 5 3 3 5 6 11 8 3 1m490-108-1 1h-2l-6-6-9-4-9-2-5 1m-203 52h4l23 1" />
          <path d="M527 815h2m-238-81v-7" />
          <path
            d="M309 700h-19l1 21m117-67 1-14-2-7-2-8-1-12v-18l-1-16v-50M97 727v-4l5-5 1-27h16m38-53h-2l-5-7m581 161-3-10-4-15-7-18-2-6-5-12-6-14-6-11-3-5-2-4-4-6-5-4-6-5-7-5-6-2-10-2h-44l-2 1-2 4-1 42m324 508c9 1 27 0 34-4l3-89v-17l1-18v-44l1-30 1-21v-29l1-22 1-31v-28l1-31 1-42v-24l1-8-1-3-1-1-3-2-16-8" />
          <path d="M892 904h7m-59 0h8m-18 34v-18m1-29 1-21" />
          <path d="m507 754 7 2 7 3m368 115v-3l-1-2" />
          <path d="M559 877v14m-42-95v-4m-186 7 1 18m6-11h5" />
          <path d="M335 811h3v-3h4" />
          <path d="M606 720v21m22 39 2-12m0 1 3-3m-3-42 4 3" />
          <path d="m633 766 1-39 1-10 49 1-2 49-49-1" />
        </g>
        <g id="roadlarge">
          <path
            d="m603 417 390-5-390 5h-7l-68-1h-76l-77-3h-2l-11-1-63-5-35-3-17-1-26-2-46-4h-14l-15 1-13 4-16 7-49 28-33 20-29 16-19 9-14 3-6 1-5 1h-26l10 3 19 5h9l13 2 81 9 61 7 16 4 28 16 29 32 15 17 21 23 6 8 14 22 6 6 5 3 7 3 40 4 34 4 8 2 50 2 26 1 61 1 91 3h12" />
          <path
            d="m519 1207 39 3 40 2 56 4 135 8 54 4 119 7h12l3-131 2-78v-34l1-35 2-50v-12l2-54v-5l1-54v-30l1-41 1-69 1-23 1-67 1-16-1-9 1-18v-13l3-79v-5l1-131 1-43v-36l1-32 3-75V53l1-85 1-50 1-77 1-69" />
          <path
            d="m559 1548 16-30 3-8 3-7 3-13 4-21 3-17 2-16 1-18 3-86-1-13-1-42 2-64 8-102 1-21-1-12v-8l-2-15-3-14-2-8-2-5-2-10-3-14-1-17 1-41 1-34v-16l1-36 2-54 1-65 1-21v-43l1-13m0 0h52l6 1 15 4 15 8 19 9 10 3 38 10 18 8 9 6 24 19 22 18 10 6 7 2 12 2 16 2h48l20 5 10 3 36 12M55 1106v-18l1-41 1-42 1-49 2-77 2-69 1-21v-12l1-54v-10l2-62v-7l3-140-1 2v-69l2-160V155l6-115m522 624v-13l6-223v-9l-1-2v-11l3-117v-12l2-106v-13l4-111 1-53 3-174v-51" />
          <path d="m-39 1164 12-9 15-11 10-8 13-7 19-8 22-9" />
          <path
            d="m52 1112-20-9-17-2-12-2-20-4h-29m98 17 14-3 40 3 29 4 19 4m0 0 64 16 48 11 21 6 26 9 12 9 8 9 7 10 3 9 16 58 11 32 13 30 13 33 4 6 14 26 7 14 3 4 5 10 35 62 17 22 7 7 71 45m267 6-4-16-20-96-4-25-5-44v-10l-1-9-7-59 4-71" />
          <path
            d="m397 1352-10 4-8 1-6 1-5 2-2 9 2-9-20-28-7-13-10-36-7-19-3-10-5-7-6-4-9-5-50-8-8 1-10 3-16 9-12 8-10 14-9 23-8 21-3 6-3 15-1 10-3 11-4 11-27 24m378 65 40 1h36" />
          <path
            d="m225 1701 4 8 6 11 7 6 33 11 7-1 5-3 17-35 9-14 8-8 14-9 10-7 5-8 5-7 5-15 1-8-1-8-3-9-7-11-71-88-9-8-5-4-12-5-8-2-8-1-8 1-12 2-43 7-11 2-6-1-3-1-4-3-3-6-1-5-1-5 1-5 2-4 4-4 7-3 5-1 18 4 9 3 9 1 11-3 8-2 5-2 11-3 15-2 18-5 15-7 34-19 14-13 10-10 9-11 5-8 11-14 8-2 7-3 5-1 14-5m196-39H437h41l-2 89 32 56 4 2 61 42 5 2" />
        </g>
        <g id="roadmed">
          <path
            d="m714 721 8 20 4 12 6 16 6 22v5l1 13-2 47 1 12 2 10 2 8 2 6 3 7 4 7 5 3 6 2 12 1 50 1 1-20-60-3h-2l-21-4m-305 391 3-109 2-88m46 423 21-31 3-6 2-3 1-12 3-244v-35l5-88" />
          <path
            d="m440 1168 41 2 37 2M62 810h7a6 6 0 0 0 3-2l1-4 6-14 9-19c3-8 6-14 11-21l12-13 3-1 4-2 6 1 1 2 1 2-1 4-4 12a236 236 0 0 0-7 30l2 12 3 5 3 4 5 2a22 22 0 0 0 12 2 20 20 0 0 0 12-5c2-3 3-5 3-8l4-15c2-8 2-10 6-16a17 17 0 0 1 4-5l2-1 8-1 7-2a309 309 0 0 0 22-9c8-5 9-6 17-8l10-2 6-1h14c15-1 31 0 46-3 3 0 14-25 14-25l4-1 20-1h21l41-1h34l1-6v-12l-1-28" />
          <path d="m387 882-1 16" />
          <path d="M567 698v6l-1 36-1 44v16l5 5 8 1h17m-367 213-7 1-4 2-6 6" />
          <path d="m674 772-1 18" />
          <path d="M137 635v-4l1-18 2-3 9-8 8-4 6-1 17-2 37-13" />
          <path d="m399 861 1 20" />
          <path
            d="M414 881h-14l-10 1h-3l-41-1m-118 138 4 4 4 3 5 2 37 4m26-411 4-4 3-3 1-4 1-6-30-1m249 226-1 41-1 56-91-5-4 1-4 1-2 2-3 4-6 9-3 5-3 6-2 7-1 8v12l-1 12v5l-3 28v5l-1 16-3 34m224-215v-13l2-2 1-3 3-2h19M434 706l5 1 4 1 4 2 3 2 2 1 6 5 4 5 2 3 2 4 2 4 2 4 1 6v6l-1 7-1 6-2 3-2 3-4 7-5 6-6 4-6 2-6 2-9 1h-25l-47 1-4-1-9-5-3-2-1-3v-3M181 959l2 1h3c3 0 7-3 9-6l1-4a12 12 0 0 0-13-12c-5 0-8 4-9 9a11 11 0 0 0 5 11l2 1m763-130v-36l1-15 2-3 2-5m-688-72h10v-16c1-2 2-4 6-4h23c2 0 4 1 5 4l2 13 2 5 5 9m371 33 30 1 7-2" />
          <path
            d="m406 1042-28-2-14-1m71-158h-21l-1-14 1-4 2-3 3-2h8l4 1 2 2 1 2 1 18v14l-1 17-1 5-2 6m589 65-17 13-3 92 16-13 1-28 3-64-5-9-7-6-28-16m-235 122 18-4 24-7 11-4 5-5 2-7 3-16M650 664l-1 9v26l1 4 5 3 4 1 5-1h2l4-5v-5l1-18v-9m-30 110v1l1 3 2 3 3 2 5 1 7 1h14l41 1h24M82 988l-2 18-23-1m534-59 9-2 12-4 6-2 3-2 4-3 1-3v-16l1-18v-35l-34-1m-364-70h21l12-1 10-1m691 237 6 1h10M272 788l3-8 7-13 13-21 5-12M180 958l-3 12-1 7 1 7 1 7 4 10 3 5 4 6 12 10 10 6 41 29 2 6m-69-248 2 6 5 15 1 4-1 3-2 3-3 3c-17 5-6 79-6 79l1 9" />
          <path d="M318 786h-14l-32 2" />
          <path d="M719 947v16" />
          <path d="m711 946 8 1 20 2m-26-37-2 34-35-1" />
          <path d="m620 905-28-1" />
          <path d="M237 669v-4l2-1 17-17-5 22v9m463-55 10 6 32 19 5 3 22 7 17 18M652 841l13 1h6l48 1v11l3 13 16 1" />
          <path d="m977 1104 23-11" />
          <path
            d="m804 732-9 9-1 3-1 3 3 4 7 7m141 38h15l1 3v30l-2 1h-3l-11-1m-55 45 14 1 7 8 1 8 4 4m75-359-10 3-3 1-44 26-21 10-25 10-10 6-12 9-9 10-8 15-7 17-8 11-8 6-18 10-7 6-7 5-6 7-16 19" />
          <path
            d="m770 506 10 7 5 7 10 19 14 24 47 48m-258 422 16-1 13 2 29 7 23 6 19 7 47 25 11 5 18 13 30 27 14 16 9 12 11 22 5 22v10l-2 25M686 677l7 11 6 11h1l6 10 8 12M56 1047l9 1 98 7 15 2 55 4 21 2 34 3 115 10 39 3 7 1 33 2 28 1 13 1 41 3 34 3h8m-166 78-40 1-5-1-5-3-5-6-6-11-4-3-11-9-26-9-42-16-6-1-6 1-2 1" />
          <path d="m656 665 7-5 30-16 21-21 7-8 12-18 8-15 23-59 6-17 5-19 9-66 1-7" />
          <path
            d="m686 677-2-10 4-14 5-9m217-231v7l-2 78-1 15v15l1 20 1 14 3 14m-562 79-1-11-1-3-2-3-6-3-20-7-9-3-7-5-9-6-9-8-3-3-6-6-3-6-2-2-9-24-3-12v-5l1-6 3-4 4-4 6-1 6-2 6-1 4-3c5-3 6-18 7-36v-29l1-6 1-49m-17 705-3 1-3 2-4 5-5 25m447-424-1-10v-12l1-2 1-8" />
          <path
            d="m369 1410 38 68m548-119 16 1 43 4 8-3 2-3 3-13 3-3 17-3 29-8m-405 26 38 2 84 4 160 10m-288-52-5-1-39-1h-25m-108 184 5 14 7 64m-19-84-49 25-35 20" />
          <path
            d="m671 1476 56-15 75-19 13-2 101 6 39-23-2-50 2-14 7-124m-579 282 14 25 45 81 4 6 3 1m-12-311 1 66-10 9-6 4" />
          <path
            d="m665 1321 4 3 2 4 1 5-1 24-5 107 5 12v12l7 27 6 25m-277-62 25 44 53 94M362 412l-2 42v3l-1 29-14 7-11-1h-37" />
          <path id="why" d="m452 528-1-15 1-14v-20l1-10v-18l-1-27v-8l2-136 2-117V44l2-52" />
          <path
            d="m809 563-4 15-4 18 1 10 7 9 12 8 23 12M608 165h-47l-30-1-75-1h-77l-79-1m460 123h-78l-69-1h-14l-68-1-76-2-78-2h-76l-76-2" />
          <path
            d="m375 382 2-103 2-116 1-28-1-92 3-87m300 329 3-119 3-119 1-138 1-27 2-81v-32M528 416l3-133V164l2-118 2-69m225 308V165l2-116 3-213 1-33 1-34M300 363l-2-23v-6l2-55V162l3-119 2-92m-84 450 4-124-1-117 2-119 3-155 1-40v-67m-5 498-77 1" />
          <path
            d="M608 165h7l70 1m0 0 75-1 62 2 51 1h37l4 1 82 1M148 278l-78-2m83-234-3 66-1 49-1 121-2 120-1 118M70 278l-86-3-20-2-26-5" />
        </g>
        <g id="roadsmall">
          <path d="m-4 914 13-31 4-17 1-17-3-59v-7l1-8V643h54" />
          <path d="m767 848-2 42" />
          <path d="m595 1277-77-3-36-3h-1l-3-5 2-17 1-79 1-88" />
          <path d="m377 989 33 4" />
          <path d="m66 651-13 2-3 2-1 4-1 40v9l3 4 5 1 8 1" />
          <path d="m977 1104 47 2" />
          <path
            d="m495 1021-16-1h-14l-3 2-1 39 3 2 13 1 14 1 2-3 2-41 13 1 4 3-1 35v6l-1 11v6m281-78h13l2-1 1-2v-13l-3-1h-10l-2 1-1 2v14l-1 20v2l1 3 1 3 2 1 2 1 12 1 25 1 50 2 3-1 7-2h2l3-1h10l1-11m-558-1 28 2h11l17 2m282-249h25v13m8 76 3 4 3 5 2 16 2 4 1 4 4 8 1 6 1 6v29l-2 76v1l1 2 2 1h13l1-2v-2l1-48m206 39-17-1-1 1-1 2v17l2 1h16l2-1 1-2v-15l-1-2-1-1ZM722 867l-4 4-3 5-2 36m242-16v20l-40-1v-20h67M264 641l-9 6h-4l-3-1-1-1-7-1h-5l-10 1-48 7-1-14-1-4 20-3 36-5h3l2 1 11 18" />
          <path d="m739 939 14 28 2 10m-175 95 1-31 2-8 13-5" />
          <path d="m379 1025-1 15" />
          <path d="M511 1066h14l3-2v-16" />
          <path d="m479 1020-2 44" />
          <path d="m982 907 20 1 5-1 4-2 3-52-12-11-18-1" />
          <path d="m672 823 55 1" />
          <path d="M672 823h-6v11l-1 8" />
          <path
            d="m671 842 1-8v-11m334-178-1-1-3-1-15-1m40-6v7l-1 4-2 3-2 1h-7l-2-2-3-1-4-3 3-8 2-1 1-1 15 1Zm-39-17h12l25 1" />
          <path d="M453 595v-17" />
          <path d="M315 587h6v26h132v-18h-49l-44 1h-39" />
          <path d="m315 578 1-17m137-17 1 17" />
          <path
            d="m313 604 2-17v-9l45 1h43l50-1 1-17-51 1h-43l-44-1 1-11 1-3 4-2 37 1h2l42-1 50-1v-7l-1-8h-70l-18 6-3 11" />
          <path d="m175 634-1-15m21 12-2-15" />
          <path
            d="m59 956 5-2 7-9 4-22v-16l-2-11-2-8-5-6-6-3m504 208-1 34-1 54-4 35m-168-185 1-10v-3l-3-1-14-1M119 631v-10l5-6 14-2m133 406-28-3-8 1-7 2" />
          <path
            d="m225 1701-5-12-9-18-6-8-22-22-16-39-1-2-2-1-1-2-6-1h-12l-12-3-12-1-36-1-16-3-10-7-6-9-39-59-3-7v-9l31-97" />
          <path
            d="m157 1497-1 4-1 8 2 10 4 10 5 9 4 8-1 9-2 12-3 18-1 8 1 6m132-214-25 20-11 25 8 21m146-67-45 26m224 26 7 8 3 15v23l6 30 14 25 29 38m-97-123 1-133" />
        </g>
        <g id="other">
          <path id="Barton-Hall" d="M834 793h24v25h11v-18h12v20h9l1-26h22v-8h-2v-4h-30v6h-5v-3h-5v2h-3v-7h-34v13Z" />
          <path id="Warren-Hall" d="M783 972h10l1-29 37 1v-6h-3l1-12-16-1v8l-29-1-1 40Z" />
          <path id="Bray-Hall" d="M886 843h14v-7h22v2h10l1-38h-4v-3h-6v29l-38-1-1 7h3v4h-1v7Z" />
          <path id="Crockett-Hall" d="M913 876h3v7l13 1 1-7h20v3h12v-39h-5v-3h-6v30l-38-1v9Z" />
          <path id="Cary-Hall" d="M815 835h29v7l14 1v-8h4v-10l-37-1v-29h-5v3l-5-1-1 38Z" />
          <path id="Nason-Hall" d="M909 946h37v30h6v-3h4l1-37h-10v1h-21v-8h-14v11h-3v5Z" />
          <path id="Hall-Hall" d="m785 874 45 1v-5h3v-5l-39-1 1-29h-6v3h-3l-1 36Z" />
          <path id="Nason-Hall1" d="M827 1016h7v-3h3l1-13h-3v-5h1v-22l9 1 1-11h-17v12h-3l-1 20h2v21Z" />
          <path id="Davison-Hall" d="M903 1014h3l1 3h6v-21h3v-18h-3v-12l-16-1v10l9 1v25h-3v13Z" />
          <path id="Sharp-Hall" d="m844 1026 53 1v-10l-53-1v10Z" />
          <path id="E-Complex" d="M411 642h10l1-12h8l-1 12h9v-11h8l-1 13h12v-22l-45-1-1 21Z" />
          <path id="North-Hall" d="m365 645 38 1v-12l-37-1-1 12Z" />
          <path id="Quad"
            d="m511 711 13 2 2-12h-1l3-12 45 1v1h3l-1 42h-1l-1 7v6h1l-1 42h-1v11l12 1v-12h-1l2-42h1v-13h-1l1-41h1l1-13h-15v1l-53-2-5 20h-1l-3 13Z" />
          <path id="Church-VI" d="M495 786h12v-11l-12 1v10Z" />
          <path id="Moe-s-Grill" d="m566 1105 13 1v-1h5l1-6-19-1v7Z" />
          <path id="Big-Apple-Pizzeria" d="m531 1101 9 1 1-6-9-1-1 6Z" />
          <path id="College-Avenue-Parking-Garage" d="M277 1048h5v8l73 6 1-16h7l1-7v-11l-27-2-42-4-16-1-1 11-1 16Z" />
          <path id="Playhouse" d="m534 856 34 1v-27h-33l-1 26Z" />
          <path id="RSEi" d="m751 753 4 3-2 2 5 5 2 1 2-1 3 3 12-14 4 4 6-7-17-14-10 12-2-2-7 8Z" />
          <path id="Pubsafe" d="m627 819 3 4v4l-1 4 4-2 27 1 1-5-12-14-13-1-4 4-2-4v6l-1 2-2 1Z" />
          <path id="Boiler-House" d="m216 697 44-1-1-21-5-1v3h-6v4h-3v-13h-15v10h-14v19Z" />
        </g>
      </g>
      <g id="buildings">
        <path id="mask" d="M0 0h10000v100000H0z" />
        <path id="CBIS"
          d="m444 941 2 1 1 2 3 2 1 2 5 3 6-1s2 2 4 3c2 0 3-2 3-2h8l-1 14 84 4h4v4l11 1 2-78h-11v6h-5v-12l-11-1v4h-10v40l-81-2v-2h-12l-1 2h1l-3 10Z" />
        <path id="EMPAC" d="M80 986h9l76 7 2-27-3-1 2-37-80-7v9l-6 1-1 18 6 3-1 7h-1l-3 27Z" />
        <path id="CII" d="M486 810v-16h-51v6l11 6v4h40Z" />
        <path id="DCC" d="M446 810v8h1l1 2 1 22h-3l-2 1-2 2v2l1 1 1 2h2l3 1 1 57h36l-1-14h3l-2-84h-40Z" />
        <path id="Armory" d="m630 931 8 1 33 1h36l2-55-20-1-56-1v19h-5v19h2v17Z" />
        <path id="JEC"
          d="m345 870 35-1v-9l24-1-1-13h-2v-4h8v-9h-2l-1-15 21-1v-11l-89 3v11l10-1v5h-1v20h7v2h-8v12h-2l1 12Z" />
        <path id="Robinson-Pool" d="m607 977 48 1v-5l56 1 1-18-42-1 1-22-33-1v4h-5v6h-5v5l-20-1-1 31Z" />
        <path id="Low" d="M488 894h7v6l24-2 1 2h3v-82h4v-5h-16l-10-3h-15l2 84Z" />
        <path id="Cogswell" d="m295 1022 43 4 1-17 29 2 2-27-72-7-2 32-1 13Z" />
        <path id="Folsom" d="M185 917h3v5l33-1v-5h4l-1-57h-4l-1-5h-31v7h-5l1 56Z" />
        <path id="Sage" d="m217 729 37-1h35l-1-30h11l-1-16-21 1v15h3v4l-19 1v-4l-16 1v3l-29 1 1 24Z" />
        <path id="Commons-Dining-Hall"
          d="M846 902h9v2l-1 16 32 1 1-17v-2h10v-10h4l7-8-8-7h-14v-6h-2v-2l-24-1-3 1-1 2h-1l-1 1-1 1v2h-4l-3 27Z" />
        <path id="Empire-State" d="m227 1000 54 5v3l15 1 2-32v-3l-15-1v3l-17-2-37-3-2 29Z" />
        <path id="JROWL" d="m345 913 35 3-1 47 20 1v-4l2-49h-3l1-4v-5h-7l-11-1v-5h-6v-6h-6l-1 5-22-1-1 19Z" />
        <path id="West" d="M96 657h12v14l24 1v-10h23v-20h-22v-10l-24-1-1 14H96v12Z" />
        <path id="'87-Gym" d="m444 696 21-1h5l1 16 25-1v-3l-1-34-52 1 1 22Z" />
        <path id="Academy" d="m526 1041 24 1v6h-8v16l21 1v-9h-3l2-42h3l1-10-23-1v17h-16l-1 21Z" />
        <path id="Sage-Dining-Hall"
          d="M520 788h6l-1 13 24 1v-4h4v-8h4v-6l1-8-10-1 1-8h1l1-8s-4-4-13-4a27 27 0 0 0-14 3v9h2v8h-6v13Z" />
        <path id="VCC" d="m241 895 7-1 1 8 26-1v3h23l-1-5 5-3 2-4v-5l-2-3-5-2v-5h-23l1 3h-27v8h-7v7Z" />
        <path id="MRC" d="m193 998 34 2 2-29-15-1-19-1-2 29Z" />
        <path id="Walker" d="m166 751 15 3 2-10 11 3 3-16 7 1 2-10-7-1 2-9-3-1-10-2-2 10-8-2-2 9-5-1-5 26Z" />
        <path id="Ricketts" d="m374 697 27-1 28-1-1-18-55 2 1 18Z" />
        <path id="Mueller" d="m633 876 56 1v-4h2v-11h-5v-2l-35-1v-3l-5-1v7h-3l-9-1-1 15Z" />
        <path id="Greene" d="m284 811 46-1v-20l-47 1 1 10v9Z" />
        <path id="Amos-Eaton" d="M173 813h44l1-21-45 1v20Z" />
        <path id="Pittsburgh" d="M103 720h10v2h13v-2l10 1v-21h-6v-4l-9-1-11 1v4l-6 1-1 19Z" />
        <path id="Troy" d="m319 695 19-1h20v-17h-10v-5h-19v6h-10v17Z" />
        <path id="Carnegie" d="m131 798 19 4 6-33-18-3-2 7-1-1-2 9-2 9h1l-1 8Z" />
        <path id="Winslow" d="M43 769h12l1-41H44l-1 41Z" />
        <path id="Lally" d="m234 812 31 1v-14h-30l-1 13Z" />
        <path id="Union"
          d="m627 768 3 1h2v10h14v2l1 1 1 2 1 2h2l1 1h12l2-1 2-2 1-1 1-3-1-8h7l13 1v-56l-40-2-18-1v8h-3l-2 46Z" />
      </g>
      <g id="roadtop">
        <path d="m612 823-32-1" />
        <path d="m440 817 87-1m-121-5 13-1 9 7" />
        <path d="M404 811h2" />
        <path d="m332 817 13-5 56-1h3" />
        <path d="m401 811 2-2h15l2 2" />
        <path d="m586 741-12-1m-419-94h10" />
      </g>
      <g id="walktop">
        <path d="m612 823-32-1m-140-5 87-1" />
        <path d="m332 817 13-5 56-1h3m2 0 13-1 9 7h12" />
        <path d="m401 811 2-2h15l2 2" />
        <path d="M404 811h2" />
        <path d="m427 803 16 8v7l-9 11 2 2M155 646h10l-1 4-2 15" />
        <path d="m586 741-12-1" />
      </g>
      <foreignObject width="100%" height="100%" x="100" y="200" style="pointer-events:none">
        <div class="map-overlays">
          <p id="test" class="titles" style="top:629px;left:352px">
            DCC
          </p>
        </div>
      </foreignObject>
    </svg>
  </div>
</template>

<script>
export default {
  name: "Map",
  data() {
    return {
      threshold: "",
      lastRatio: "",
      lastX: "",
      lastY: "",
      unselected: "",
      colors: "",
      doResize: "",
    }
  },
  mounted() {
    this.threshold = 1
    this.lastX = window.innerWidth
    this.lastY = window.innerHeight
    this.lastRatio = this.lastX / this.lastY
    this.unselected = false;
    this.colors = [
      "#fdfedc",
      "#fef6c0",
      "#feeea4",
      "#fdd884",
      "#fdc675",
      "#fcad60",
      "#f99a57",
      "#f57948",
      "#eb6045",
      "#d7434b",
      "#c9314b",
      "#9e0041",
    ]

    setTimeout(() => map.style.transition = "transform .2s, width .4s", 1000)

    map.style.opacity = 1
    mask.style.opacity = 0

    window.addEventListener("resize", this.windowResizeTimeout)

    if (this.lastRatio <= this.threshold)
      map.style.transform = `scale(${this.lastY / 50})` + `rotate(90deg)`
    else
      map.style.transform = `scale(${this.lastX / 50}) rotate(0deg)`


    mask.addEventListener("click", this.maskEventHandler)

    for (const b of buildings.children) {
      if (b.id == "mask") continue
      let randColor = this.colors[Math.floor(Math.random() * this.colors.length)];
      b.style.fill = randColor
      b.addEventListener("click", this.buildingEventHandler)
    }
  },
  methods: {
    bringToFront(b) {
      let group = b.parentNode
      group.appendChild(b)
    },
    windowResizeTimeout() {
      clearTimeout(this.doResize);
      this.doResize = setTimeout(this.windowEventHandler, 300);
    },
    windowEventHandler() {
      let x = window.innerWidth
      let y = window.innerHeight
      let ratio = x / y

      if (ratio < this.threshold) { // portrait mode
        map.style.transform = `scale(${y / 50})` + `rotate(90deg)`
      }

      if (ratio >= this.threshold) { // landscape mode
        map.style.transform = `scale(${x / 50})`
      }
    }
  },
  maskEventHandler() {
    try {
      // deselect
      let sel = document.querySelector(".selected")
      sel.classList.remove('selected')
      mapBox.style.transform = "scale(1)"
      mask.style.pointerEvents = "none"
      mask.style.opacity = 0

    } catch { /* pass*/ }
  },
  buildingEventHandler() {
    let bBox = b.getBoundingClientRect()
    let boxCenterX = bBox.x + bBox.width / 2
    let boxCenterY = bBox.y + bBox.height / 2

    try {
      last = document.querySelector(".selected")
      last.classList.remove('selected')
    }
    catch { this.unselected = true }
    finally {
      b.classList.add("selected")

      if (this.unselected) {
        let group = b.parentNode
        group.appendChild(mask)
        group.appendChild(b)
        mask.style.opacity = 0.6
        mask.style.pointerEvents = "inherit"

        mapBox.style.transform = `scale(3) translate(${this.lastX / 2 - boxCenterX}px, ${this.lastY / 2 - boxCenterY - 50}px)`
        this.unselected = false
      }
    }
  }
}
</script>


<style scoped>
#mapBox {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  justify-content: center;
  align-items: center;
  transition: 500ms linear all;
}

.map-overlays {
  position: absolute;
  user-select: none;
  pointer-events: none;
  z-index: 1;
}

.titles {
  position: absolute;
  color: white;
  font-size: 16px;
  font-weight: 700;
  opacity: 0.5;
}

#mask {
  opacity: 0;
  transition: all .5s;
  fill: var(--background) !important;
  stroke: none !important;
}

#map {
  /* startup properties (replaced): */
  opacity: 0;
  transition: width linear 2s, height linear 2s, opacity .8s;
  width: 50px;
}

#buildings path {
  cursor: pointer;
  fill: var(--buildfill);
  stroke: var(--buildbord);
  stroke-width: 1px;
  transition-duration: .2s;
}


#other path {
  fill: var(--buildfill);
  stroke: var(--buildbord);
  stroke-width: 1px;
}

#bg {
  fill: none;
}

#roadlarge {
  stroke: var(--carroad);
  stroke-width: 9px;
}

#roadmed path {
  stroke: var(--carroad);
  stroke-width: 4px;
}

#roadsmall path {
  stroke: var(--carroad);
  stroke-width: 3px;
}

#roadtop path {
  fill: none;
  stroke: var(--carroad);
  stroke-width: 3px;
}

#walktop path {
  fill: none;
  stroke: var(--walkpath);
  stroke-width: 1px;
}

#walk path {
  stroke: var(--walkpath);
  stroke-width: 1px;
}

#stair path {
  stroke: var(--walkpath);
  stroke-width: 3px;
  stroke-dasharray: 1px;
}

.selected {
  opacity: 1 !important;
  fill: #3aeab5 !important;
  stroke: #20c05b6f !important;
  stroke-width: 2px !important;
}
</style>